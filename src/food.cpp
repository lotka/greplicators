#include "food.h"
#include "genome.h"
#include <cmath>
 
////////////////////////////////////////////////////////////////////////////////////////
// constructor
////////////////////////////////////////////////////////////////////////////////////////
food::food()
{
   type         =   2;
   maxFoodValue = theGenome.getGenotype(foodGenome::maxFoodValue);
   foodValue    = 100;
   foodTransfer =  20;
   hp           = 100;
}

////////////////////////////////////////////////////////////////////////////////////////
// update
////////////////////////////////////////////////////////////////////////////////////////
void food::update()
{

}

////////////////////////////////////////////////////////////////////////////////////////
// update
////////////////////////////////////////////////////////////////////////////////////////
void food::update(entitySet collidingEntitySet)
{
    ++age;

    if(foodValue < maxFoodValue)
    {
        ++foodValue;
    }
    if(foodValue < 0)
    {
        std::cout << "A food was depleted" << std::endl;
    }

    for(entitySet::iterator it = collidingEntitySet.begin(); it != collidingEntitySet.end(); it++)
    {
      //(*it)->seed(theGenome);
      //TODO
    }
}


////////////////////////////////////////////////////////////////////////////////////////
// eat
////////////////////////////////////////////////////////////////////////////////////////
int food::eat()
{
  if( foodValue > 0 )
  {
    foodValue -= foodValue;
    return foodTransfer;
  }
  else
  {
    --maxFoodValue;
    return 0;
  }
}
